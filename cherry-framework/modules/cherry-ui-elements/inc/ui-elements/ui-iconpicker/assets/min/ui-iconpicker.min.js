!function(e,t,n){"use strict";t.utilites.namespace("ui_elements.iconpicker"),t.ui_elements.iconpicker={iconSets:{},iconSetsKey:"cherry5-icon-sets",init:function(){e(document).on("cherry-ajax-handler-success",this.setIconsSets.bind(this)).on("ready.iconpicker",this.setIconsSets.bind(this,window.cherry5IconSets)).on("ready.iconpicker",this.render.bind(this)).on("cherry-ui-elements-init",this.render.bind(this))},setIconsSets:function(e){var t,i=this;e&&(t=e.response?e.response.cherry5IconSets:e,n.each(t,function(e,t){i.iconSets[t]=e}),i.setState(i.iconSetsKey,i.iconSets))},getIconsSets:function(){var e=this.getState(this.iconSetsKey);e&&(this.iconSets=e)},render:function(t){var n,i,s,c=t._target?t._target:e("body"),o=e('.cherry-ui-iconpicker:not([name*="__i__"])',c),r=this;o[0]&&(this.getIconsSets(),o.each(function(){n=e(this),i=n.data("set"),s=r.iconSets[i],n.length&&s.icons&&n.iconpicker({icons:s.icons,iconBaseClass:s.iconBase,iconClassPrefix:s.iconPrefix,animation:!1,fullClassFormatter:function(e){return s.iconBase+" "+s.iconPrefix+e}}).on("iconpickerUpdated",function(){e(this).trigger("change")}),s&&e("head").append('<link rel="stylesheet" type="text/css" href="'+s.iconCSS+'"">')}))},getState:function(e){try{return JSON.parse(window.sessionStorage.getItem(e))}catch(e){return!1}},setState:function(e,t){try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}}},t.ui_elements.iconpicker.init()}(jQuery,window.CherryJsCore,window._);